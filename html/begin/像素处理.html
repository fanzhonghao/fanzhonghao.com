<html>
<head>
    <title>图像像素处理</title>
    <script type="text/javascript" src="script.js"></script>
</head>
<body onload="draw('canvas');">
<h1>像素处理示例</h1>
<canvas id="canvas" width="400" height="300"></canvas>
<script>
    function draw(id){
        var canvas=document.getElementById(id);
        if(canvas==null){
            return false;
        }
        var context=canvas.getContext('2d');
        image=new Image();
        image.src="flower.jpg";
        image.onload=function(){
            context.drawImage(image,0,0);
            var imagedata=context.getImageData(0,0,image.width,image.height);<!--获取一个imageData对象，并包含相关的像素数组-->
            for(var i=0,n=imagedata.data.length;i<n;i+=4){<!--对像素值重新赋值-->
                imagedata.data[i+0]=255-imagedata.data[i+0];
                imagedata.data[i+1]=255-imagedata.data[i+2];
                imagedata.data[i+2]=255-imagedata.data[i+1];
            }
            context.putImageData(imagedata,0,0);<!--将处理过的图像显示出来-->
        };
    }
</script>
</body>
</html>
